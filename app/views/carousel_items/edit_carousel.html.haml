#notice=flash[:notice]
#error=flash[:notice]

-header_tag do
	%h1 Edit the Carousel
	%div{ style: 'display:inline-block;' }
		=link_to new_carousel_item_path, class: 'btn btn-success', id: :new_carousel_link, remote: true, title: 'Add Image', 'data-toggle' => 'tooltip' do
			-glyphicon_tag 'plus'
		=link_to reorder_carousel_path, class: 'btn btn-primary', title: 'Save Changes', 'data-toggle' => 'tooltip' do
			-glyphicon_tag 'floppy-saved'
		=link_to edit_carousel_path, class: 'btn btn-warning', title: 'Undo All Changes', 'data-toggle' => 'tooltip' do
			-glyphicon_tag 'refresh'

-table_tag do
	%thead
		%tr
			%th
			%th Image
			%th Primary Caption
			%th Secondary Caption
			%th Actions
	%tbody.sortable
		-@items.each do |item|
			%tr
				%td
					-glyphicon_tag 'resize-vertical', class: 'handle btn btn-lg btn-default'
				%td=image_tag item.image.url(:thumbnail)
				%td=item.primary_caption
				%td=item.secondary_caption
				%td
					=link_to edit_carousel_item_path(item), class: 'btn btn-default' do
						-glyphicon_tag 'pencil'
					=link_to item, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' do
						-glyphicon_tag 'remove'
#new_carousel_form
:javascript
	show_hide_form('#new_carousel_link', '#new_carousel_form', '#cancel_new_carousel_form');

	$('.sortable').sortable({
		handle: '.handle',
		cursor: 'move',
		axis: 'y'
	});

	$(document).ready(function () {
		$('td').each(function () {
			$(this).css('width', $(this).width() + 'px');
		});
	});